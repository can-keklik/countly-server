<div v-bind:class="[componentId]" class="main-view logger-home cly-vue-logger">
    <cly-header>
        <template v-slot:header-left>
            <h2 class="cly-vue-logger__title"> {{i18n('logger.title')}}
            </h2>
            <span v-tooltip="getTitleTooltip()"><i class="cly-vue-logger__tooltip ion-help-circled"></i></span>
        </template>
        </span>
        <template v-slot:header-bottom>
            <span class='cly-vue-logger__subtitle text-small'>
                {{collectionInfo}}
            </span>
        </template>
        <template v-slot:header-right>
            <div v-if="autoRefresh" class="bu-level-item">
                <span class="cly-vue-logger__refresh--enabled">{{i18n('logger.auto-refresh-is')}}</span>
                <span class="cly-vue-logger__refresh--enabled-color">{{i18n('logger.enabled')}}</span>
                <span v-tooltip="getRefreshTooltip()"><i class="cly-vue-logger__tooltip ion-help-circled"></i></span>
                <el-button @click="stopAutoRefresh()"><i class="ion-stop"></i> {{i18n('logger.auto-refresh-stop')}}</el-button>
            </div>
            <div v-else="autoRefresh" class="bu-level-item">
                <el-switch v-model="autoRefresh">
                </el-switch>
                <span class="cly-vue-logger__refresh--disabled">{{i18n('logger.auto-refresh')}}</span>
                <span v-tooltip="getRefreshTooltip()"><i class="cly-vue-logger__tooltip ion-help-circled"></i></span>
            </div>
        </template>
    </cly-header>
    <cly-main>
        <cly-section>
            <cly-datatable-n :rows="logsData" :resizable="false">
                <template v-slot:header-left="scope">
                    <el-select v-model="loggerFilter" placeholder="Select" @change="filterChange()">
                        <el-option v-for="filter in filterOptions" :key="filter.value" :label="filter.label" :value="filter.value">
                        </el-option>
                    </el-select>
                </template>
                <template v-slot:header-right="scope">
                    <div class="cly-vue-logger__next-page">
                        <div class="cly-vue-logger__next-page--first"></div>
                        <div class="cly-vue-logger__next-page--second"></div>
                    </div>
                    <i :click="sync()" class="el-icon-refresh cly-vue-logger__refresh"></i>
                </template>
                <template v-slot="scope">
                    <el-table-column type="expand">
                        <template v-slot="props">
                            <cly-section>
                                <el-tabs type="border-card" value="data">
                                    <el-tab-pane name="data" label="Data">
                                        <div>
                                            <pre>{{ props.row.q | pretty }}</pre>
                                        </div>
                                    </el-tab-pane>
                                    <el-tab-pane name="header" label="Header">
                                        <div>
                                            <pre>{{ props.row.h | pretty }}</pre>
                                        </div>
                                    </el-tab-pane>
                                </el-tabs>
                            </cly-section>
                        </template>
                </el-table-column>
                <el-table-column :label="i18n('logger.requests')">
                    <template slot-scope="scope">
                            <logger-readable-date :timestamp="scope.row.reqts"></logger-readable-date>
                        </template>
                </el-table-column>
                <el-table-column sortable="custom" :label="i18n('logger.timestamp')">
                    <template slot-scope="scope">
                            <logger-readable-date :timestamp="scope.row.ts"></logger-readable-date>
                        </template>
                </el-table-column>
                <el-table-column prop="d" :label="i18n('logger.details')">
                    <template slot-scope="scope">
                            <logger-details :device="scope.row.d" :version="scope.row.v" :sdk="scope.row.s"
                                :location="scope.row.l"></logger-details>
                        </template>
                </el-table-column>
                <el-table-column :label="i18n('logger.info')">
                    <template slot-scope="scope">
                            <logger-info :info="scope.row.t" :filter="loggerFilter"></logger-info>
                        </template>
                </el-table-column>
                </template>
            </cly-datatable-n>
        </cly-section>
    </cly-main>
</div>
