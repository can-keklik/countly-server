<script type="text/x-template" id="push-notification-details">
    <div v-bind:class="[componentId]">
        <cly-header class="cly-vue-push-notification-details-header">
            <template v-slot:header-left>
                <h2> {{pushNotification.message.name }} </h2>
            </template>
            <template v-slot:header-top>
                <cly-back-link link="/messaging" :title="i18n('push-notification-details.back-to')"></cly-back-link>
            </template>
            <template v-slot:header-right>
                <cly-more-options size="small" @command="handleUserEvents($event, scope.row._id )">
                    <el-dropdown-item :command="UserEventEnum.DUPLICATE">{{i18n('push-notification.duplicate')}}</el-dropdown-item>
                    <el-dropdown-item :command="UserEventEnum.DELETE">{{i18n('push-notification.delete')}}</el-dropdown-item>
                    <el-dropdown-item :command="UserEventEnum.RESEND">{{i18n('push-notification.resend')}}</el-dropdown-item>
                </cly-more-options>
            </template>
            <template v-slot:header-bottom>
                <div class="bu-level-item cly-vue-push-notification-details-sub-header">
                    <span class="blinker-wrapper" v-bind:style="{backgroundColor:getStatusBackgroundColor().concat(DEFAULT_ALPHA_COLOR_VALUE_HEX)}"> 
                        <span class="blinker" v-bind:style="{backgroundColor:getStatusBackgroundColor()}">  </span>
                        <span class="cly-vue-push-notification-details-sub-header-title"> {{pushNotification.status && pushNotification.status.label}} </span>
                    </span>
                </div>
                <div class="bu-level-item cly-vue-push-notification-details-sub-header">
                    <div class="ion ion-ios-time-outline cly-vue-push-notification-details-sub-header-icon"></div>
                    <span class="cly-vue-push-notification-details-sub-header-title"> {{i18n('push-notification-details.created')}} {{pushNotification.createdDateTime && formatDateAgoText(pushNotification.createdDateTime.date)}} by  {{pushNotification.createdBy}}  </span>
                </div>
                <div class="bu-level-item cly-vue-push-notification-details-sub-header" >
                    <div class="ion ion-pricetag cly-vue-push-notification-details-sub-header-icon"></div>
                    <span class="cly-vue-push-notification-details-sub-header-title"> {{i18n('push-notification-details.message-id')}} {{pushNotification.id}} </span>
                </div>
            </template>
        </cly-header>

        <cly-main>
            <div>
                <div class="bu-level-left" style="margin-bottom:32px">
                    <div class="bu-level-item">
                        <div class="cly-vue-platform-filter-label"> 
                            {{i18n('push-notification-details.results-for')}}
                        </div>
                    </div>
                    <div class="bu-level-item">
                        <el-select v-model="selectedPlatformFilter">
                            <el-option :key="item.value" :value="item.value" :label="item.label"
                                v-for="item in platformFilters"
                            >
                            </el-option>
                        </el-select>
                    </div>
                    <div class="bu-level-item">
                        <div class="cly-vue-platform-filter-label"> 
                            {{i18n('push-notification-details.and-label')}}
                        </div>
                    </div>
                    <div class="bu-level-item">
                        <el-select v-model="selectedLocalizationFilter">
                            <el-option :key="item.value" :value="item.value" :label="item.label"
                                v-for="item in localizationFilters"
                            >
                            </el-option>
                        </el-select>
                    </div>
                </div>
            </div>
            <cly-section>
                <div class="bu-columns">
                    <div class="bu-column bu-is-12">
                        <cly-chart-bar :option="usersTargetedOptions" :height="400" :showZoom=false :showToggle=false :showDownload=false ></cly-chart-bar>
                    </div>
                </div>
            </cly-section>
            <div class="cly-vue-push-notification-details-summary">
                <div class="bu-columns bu-is-mobile">
                    <div class="bu-column bu-is-10">
                        <cly-header title="Message Summary" class="cly-vue-push-notification-details-summary__header">
                            <template v-slot:header-left>
                                <h2> {{i18n('push-notification-details.summary-header')}} </h2>
                                <cly-tooltip-icon :tooltip="i18n('push-notification.description')" icon="ion ion-help-circled"> </cly-tooltip-icon>
                            </template>
                            <template v-slot:header-tabs>
                                <cly-dynamic-tabs v-model="currentSummaryTab" skin="secondary" :tabs="summaryTabs"></cly-dynamic-tabs>
                            </template>
                        </cly-header>
                    </div>
                    <div class="bu-column">
                        <mobile-message-preview :title="message.name" :content="message.content" :platforms="pushNotification.platforms" :media="message.media" :buttons="message.buttons.map(function(item){return item.label})" class="cly-vue-push-notification-details-summary__message-preview"> </mobile-message-preview>
                    </div>
                </div>
            </div>
        </cly-main>
    </div>
</script>
